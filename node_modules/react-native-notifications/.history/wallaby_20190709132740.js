const babelOptions = require('./package.json').babel;

module.exports = function (wallaby) {
  return {
    env: {
      type: 'node',
      runner: 'node'
    },

    testFramework: 'jest',

    files: [
      'package.json',
      'lib/src/**/*.js',
      'lib/src/**/*.ts',
      'lib/src/**/*.tsx',
      // '!lib/src/**/*.spec.tsx',
      // '!lib/src/**/*.spec.js',
      // '!lib/src/**/*.spec.ts',
      // '!test/**/*spec.js',
    ],

    tests: [
      'lib/src/**/*.spec.js',
      'lib/src/**/*.spec.ts',
      'lib/src/**/*.spec.tsx'
    ],

    compilers: {
      '**/*.js': wallaby.compilers.babel(babelOptions),
      '**/*.ts?(x)': wallaby.compilers.typeScript({
        module: 'commonjs',
        jsx: 'React'
      })
    },

    setup: (w) => {
      w.testFramework.configure(require('./package.json').jest);
    }
  };
};
